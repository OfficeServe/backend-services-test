machine:

  # pre:
  #   - git clone git@github.com:OfficeServe/sbt-settings.git
  #   - chmod +x sbt-settings/./circleBuildScript.sh
  #   - sbt-settings/./circleBuildScript.sh machine_pre
  timezone: UTC
  java:
    version: oraclejdk8
  services:
    - docker

# Collect build artifacts
general:
  artifacts:
    - target/universal

dependencies:
  # Cache the resolution-cache and build streams to speed things up
  pre:
    - wget -q https://dl.bintray.com/sbt/debian/sbt-0.13.13.deb
    - sudo dpkg -i sbt-0.13.13.deb
  cache_directories:
    - "~/.ivy2"
    - "~/.sbt"

  override:
    # - sbt clean test:compile
    - sbt clean test:compile

test:
  override:
    # - ../sbt-settings/circleBuildScript.sh run_tests && sbt it:test
    # - sbt clean test it:test package
    - sbt compile 
  # Copy test reports to Circle test reports dir then package app for deploy
  # post:
  #   - cd .. ; sbt-settings/./circleBuildScript.sh copy_test_report
